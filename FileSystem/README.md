实验四 文件系统
4.2 I/O系统
实际物理磁盘的结构是多维的：有柱面、磁道、扇区等概念。I/O系统的任务是隐藏磁盘的结构细节，把磁盘以逻辑块的面目呈现给文件系统。
逻辑块顺序编号，编号取值范围为0至L-1，其中L表示磁盘的存储块总数。实验中，我们可以利用字符数组ldisk[L][B]构建磁盘模型，其中B表示每个存储块的长度。
I/O系统从文件系统接收命令，根据命令指定的逻辑块号把磁盘块的内容读入命令指定的内存区域，或者把命令指定的内存区域内容写入磁盘块。
文件系统和I/O系统之间的接口由如下两个函数定义:

read_block(int i, char* p);
write_block(int i, char* p);

4.3 文件系统
文件系统位于I/O系统之上。文件系统需提供如下函数：create, destroy, open, read, write

4.3.1 文件系统的组织
磁盘的前k个块是保留区，其中包含如下信息：位图和文件描述符。位图用来描述磁盘块的分配情况。位图中的每一位对应一个逻辑块。
创建或者删除文件，以及文件的长度发生变化时，文件系统都需要进行位图操作。前k个块的剩余部分包含一组文件描述符。每个文件描述符包含如下信息：

文件长度，单位字节

文件分配到的磁盘块号数组。该数组的长度是一个系统参数。在实验中我们可以把它设置为一个比较小的数，例如3。

4.3.2 目录
我们的文件系统中仅设置一个目录，该目录包含文件系统中的所有文件。除了不需要显示地创建和删除之外，目录在很多方面和普通文件相像。
目录对应0号文件描述符。初始状态下，目录中没有文件，所以目录对应的描述符中记录的长度应为0，而且也没有分配磁盘块。
每创建一个文件，目录文件的长度便增加一分。目录文件的内容由一系列的目录项组成，其中每个目录项由如下内容组成：

文件名

文件描述符序号

4.4 测试
为了能够对我们的模拟系统进行测试，请编写一个操纵文件系统的外壳程序或者一个菜单驱动系统。
